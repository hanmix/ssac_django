{% extends 'base.html' %}
{% block content %}
<form action="{% url 'sign_com' %}" method="POST">
  {% csrf_token %}
  <section class="form-group text-center mt-3">
    <h1 style="color: red;">Modal 작업 예정 입니다.</h1>
    <article class="mb-5">
      <h1 class="mb-3">회원가입 페이지 입니다.</h1>
      <h3>회원 정보를 입력해주세요.</h3>
    </article>
    <article class="mb-3">
      <label for="name">이름
        <input type="text" class="form-control inputSize" name="name" id="name" placeholder="한글 1~10자" pattern="^[가-힣]{1,10}$">
      </label>
    </article>
    <article class="mb-3">
      <label for="id">아이디
        <input type="text" class="form-control inputSize" name="id" id="id" placeholder="영문, 숫자 4~10자" pattern="^[A-Za-z]{1}[A-Za-z0-9]{4,10}$">
      </label>
      <div class="mt-2">
        <button class="form-control btn btn-outline-success btnSize" type="button" id="idck" onclick="idcks()">중복체크</button>
      </div>
      <div class="mt-1" id="id_div"></div>
    </article>
    <article class="mb-3">
      <label>비밀번호
        <input type="password" class="form-control pw inputSize" name="pw" id="pw1"   placeholder="영문, 숫자 포함 8~20자" pattern="^[a-zA-Z0-9]{8,20}$">
      </label>  
    </article>
    <article class="mb-3">
      <label>비밀번호 확인
        <input type="password" class="form-control pw inputSize" name="pw2" id="pw2" placeholder="비밀번호를 재입력해주세요." pattern="^[a-zA-Z0-9]{8,20}$">
    </label>
      <div class="mt-1" id="pw_div"></div>
    </article>
    <article class="mb-3">
      <label>이메일 주소
        <input type="text" class="form-control inputSize" name="email" placeholder="ex) green123@도메인주소" pattern="^[a-z0-9_+.-]+@([a-z0-9-]+\.)+[a-z0-9]{2,4}$">
      </label>
    </article>
    <article class="mb-3">
      <label>배송 주소
        <input type="text" class="form-control inputSize" name="address" id="address_kakao" placeholder="주소 검색하기" readonly>
      상세주소
        <input type="text" class="form-control inputSize" name="address_detail">
      </label>
    </article>
    <article class="mb-3">
      <label>성별
        <select class="form-select mb-3 selecterSize" name="gender">
          <option selected>선택해주세요.</option>
          <option value="M">남성</option>
          <option value="W">여성</option>
        </select>
      </label>
    </article>
    <div class="mb-3">
      <button class="signBtnSize btn btn-success">회원가입 하기</button>
    </div>
  </section>
</form>
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<script>
  window.onload = function(){
    document.getElementById("address_kakao").addEventListener("click", function(){ //주소입력칸을 클릭하면
        //카카오 지도 발생
        new daum.Postcode({
            oncomplete: function(data) { //선택시 입력값 세팅
                document.getElementById("address_kakao").value = data.address; // 주소 넣기
                document.querySelector("input[name=address_detail]").focus(); //상세입력 포커싱
            }
        }).open();
    });
}
  function idcks(){
    $.post(
    "idCk",
    {id_:$('#id').val(), 
    csrfmiddlewaretoken: document.getElementsByName('csrfmiddlewaretoken')[0].value},
    function(idid){
      $('#id_div').html(idid)
    }
  );
};
  $('.pw').focusout(function () {
    $.post(
      "pwCk",
      {pwd1:$("#pw1").val(), pwd2:$("#pw2").val(), csrfmiddlewaretoken: document.getElementsByName('csrfmiddlewaretoken')[0].value},
      function(pwpw){
        $("#pw_div").html(pwpw)
      }
    )
  });
</script>
{% for message in messages %}
<script>
  alert('{{message.message}}')
</script>
{% endfor %}
{% endblock %}